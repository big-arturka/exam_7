{% extends 'base.html' %}
{% block title %}Shop-ON-homE{% endblock %}

{% block menu %}
    <li class="nav-item active">
        <a class="nav-link" href="{% url 'product_create' %}">Добавить новый продукт</a>
    </li>
{% endblock %}

{% block content %}
    <div class="main_page">
        <h1 class="title">Online Shop</h1>
        <div class="btn-group">
            <button type="button" class="btn btn-outline-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Фильтр по категории
            </button>
            <div class="dropdown-menu">
                {% for eng_name, ru_name in categories %}
                    <a class="dropdown-item" href="{% url 'category_view' eng_name %}">{{ ru_name }}</a>
                {% endfor %}
            </div>
        </div>

        {% for product in products %}
            <div class="card w-100">
                <div class="card-body">
                    <h5 class="card-title">{{ product.name }}</h5>
                    <p class="card-text">Категория: <a href="{% url 'category_view' product.category %}" class="category_link">{{ product.get_category_display }}</a></p>
                    <p class="card-text">Цена: {{ product.price }}</p>
                    <a href="{% url 'product_view' product.pk %}" class="btn btn-primary">Подробнее</a>
                    <a href="{% url 'product_update' product.pk %}" class="btn btn-primary">Изменить</a>
                    <a href="{% url 'product_delete' product.pk %}" class="btn btn-primary">Удалить</a>
                    <form action="{% url 'product_add' product.pk %}" method="post">
                        {% csrf_token %}
                        <input type="submit" class="btn btn-primary" name="add" value="Добавить в корзину">
                    </form>
                </div>
            </div>
        {% endfor %}
    
    </div>
    <a href="{% url 'product_create' %}" class="btn btn-primary btn-lg btn-block">Добавить товар</a>

    {% if is_paginated %}
        {% include 'partial/pagination.html' %}
    {% endif %}
{% endblock %}
